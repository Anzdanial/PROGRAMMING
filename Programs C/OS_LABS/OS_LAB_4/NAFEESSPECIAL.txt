#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
#include <wait.h>
#include <stdlib.h>


int main(int argc, char **argv) {
    int fd[2];
    pipe(fd);
    char inputFile[9] = {'\0'};
    char outputFile[10] = {'\0'};

    for(int j = 0; argv[1][j] != '\0'; j++){
            inputFile[j] = argv[1][j];
    }
    for(int j = 0; argv[2][j] != '\0'; j++){
            outputFile[j] = argv[2][j];
    }
    printf("%c \n", inputFile[9]);
    printf("%c \n", outputFile[10]);
    printf("%s \n", inputFile);
    printf("%s \n", outputFile);
//    printf("The name of input file is: ");
//    for(int i = 0; i < 9; i++)
//        printf("%c", inputFile[i]);
//    printf(" \n");
//    printf("The name of output file is: ");
//    for(int i = 0; i < 10; i++)
//        printf("%c", outputFile[i]);
//    printf(" \n");

//    int val = fork();
//    if(val == 0){
//        close(fd[1]);
//    }
//    else if(val > 0){
//        close(fd[0]);
//        char data[100];
//        FILE *fptr;
//        if ((fptr = fopen(inputFile,"r")) == NULL){
//                printf("Error! opening file");
//                exit(1);
//            }
//        fscanf(fptr, "%s", data);
//        int size;
//        for(size = 0; data[size] != '\0'; size++)
//            printf("%c \n", data[size]);
//        printf("The size of the content is: %d \n", size);
//        fclose(fptr);
//        write(fd[1], inputFile, sizeof(inputFile));
//    }
    return 0;
}




#include <stdio.h>
#include <fcntl.h>
#include <unistd.h>
#include <wait.h>
#include <stdlib.h>
#include <string.h>


int main(int argc, char **argv) {
    int fd[2];
    pipe(fd);
    char inputFile[10];
    char outputFile[10];
    for(int j = 0; argv[1][j] != '\0'; j++){
        inputFile[j] = argv[1][j];
    }
    for(int j = 0; argv[2][j] != '\0'; j++){
        outputFile[j] = argv[2][j];
    }

//    printf("%s \n",inputFile );
//    printf("%s \n",outputFile );

//    printf("The name of input file is: ");
//    for(int i = 0; i < 9; i++)
//        printf("%c", inputFile[i]);
//    printf(" \n");
//    printf("The name of output file is: ");
//    for(int i = 0; i < 10; i++)
//        printf("%c", outputFile[i]);
//    printf(" \n");
//
    int val = fork();
    if(val == 0){
        close(fd[1]);
        char data[100];
        read(fd[0], data, sizeof(data));
        int size = strlen(data);
        printf("[Child: %d] - The size of content received is: %d\n",getpid(), size);
        printf("[Child: %d] - The content of File received is: ",getpid());
        for(int i = 0; i < size; i++)
            printf("%c",data[i]);
        printf("\n");
        FILE *fptr;
        if ((fptr = fopen("output.txt","w")) == NULL){
            perror("Error! opening file");
            exit(1);
        }
        for(int i = 0; i < size-2; i++){
            fputc(data[i], fptr);
        }
        fclose(fptr);
    }
    else if(val > 0){
        close(fd[0]);
        char data[100];
        FILE *fptr;
        if ((fptr = fopen(inputFile,"r")) == NULL){
            perror("Error! opening file");
            exit(1);
        }
        fgets(data, sizeof(data), fptr);
        int size;
        printf("[Parent: %d] - The content of File is: ", getpid());
        for(size = 0; data[size] != '\0'; size++)
            printf("%c", data[size]);
        printf("\n[Parent: %d] - The size of the content is: %d \n", getpid(), size);
        fclose(fptr);
        write(fd[1], data, size);
        wait(NULL);
    }
    return 0;
}

