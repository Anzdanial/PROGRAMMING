#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <fcntl.h>
#include <string.h>
#include <sys/stat.h>

char* reverseCase(char array[], int size){
    for(int i = 0; i < size; i++){
        if(array[i] > 64 && array[i] < 91)
            array[i] = array[i] + 32;
        else if(array[i] > 96 && array[i] < 123)
            array[i] = array[i] - 32;
    }
    return array;
}

//READ FILE
int main() {
    const char* pipeName = "/tmp/lab_5.1";
    char buffer[1024];
    int fd = open(pipeName, O_RDONLY);

    read(fd, buffer, sizeof(buffer));
    close(fd);

    int size;
    for(size = 0; buffer[size]!='\0'; size++);
    size--;

    char* array = reverseCase(buffer,size);

    fd = open(pipeName,O_WRONLY);
    write(fd,array,sizeof(array));
    close(fd);
    return 0;
}
